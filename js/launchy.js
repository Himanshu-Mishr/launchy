var Launchy=function(t){function e(l){if(a[l])return a[l].exports;var i=a[l]={i:l,l:!1,exports:{}};return t[l].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var a={};return e.m=t,e.c=a,e.d=function(t,a,l){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:l})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,a){"use strict";function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var a=0;a<e.length;a++){var l=e[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}return function(e,a,l){return a&&t(e.prototype,a),l&&t(e,l),e}}(),o={launchModal:"a",closeModal:"a",modalWindow:"div",modalContent:"div",modalOverlay:"div",modalTitle:"h2"},n={modalLaunchLink:"launchy__launch-link",modalCloseLink:"launchy__close-link",modalWindow:"launchy__window",modalContent:"launchy__content",modalOverlay:"launchy__overlay",modalTitle:"launchy__title",modalWindowIsVisible:"launchy__window--is-visible",modalOverlayIsVisible:"launchy__overlay--is-visible"},r={launchyAriaHidden:"data-launchy-aria-hidden",launchyFocusable:"data-launchy-focusable",launchyTabIndex:"data-launchy-tabindex",launchyText:"data-launchy-text",launchyTitle:"data-launchy-title",launchyCustom:{close:"data-launchy-close",refocus:"data-launchy-refocus"}},s={Escape:27},d={launchyElements:"[data-launchy]",launchyControl:"launchy-control-",launchyDialog:"launchy-dialog-",launchyCloseControl:"launchy-close-control-",modalOverlay:"modal-overlay-",modalTitle:"modal-title-"},u={modalClose:"Close modal window!",modalCloseHTML:'<span aria-hidden="true">&times;</span>',modalError:"Launchy container must have a `data-launchy-text` attribute!",modalErrorEmpty:"Launchy container `data-launchy-text` attribute cannot be empty!",modalWarning:"Launchy container should have a `data-launchy-title` attribute, or be sure to supply your own heading! (Prefereably an `<h2>`.)",refocusElemNotFound:"Refocus element not found!"},h=0,c=function(){function t(e){l(this,t),this.focusable=a(1),this.launchyId=h,this.hasTitle=!!e.title,this.modalIsVisible=!1,this.activeElement=null,this.shiftKeyIsPressed=!1,this.allFocusable=null,this.firstFocusable=null,this.lastFocusable=null,this.domFocusable=null,this.prepareFocusable(),this.createElements(e),this.insertElements(e),this.setupEventListeners(),h++}return i(t,[{key:"prepareFocusable",value:function(){this.domFocusable=document.querySelectorAll(this.focusable);var t=!0,e=!1,a=void 0;try{for(var l,i=Array.from(this.domFocusable)[Symbol.iterator]();!(t=(l=i.next()).done);t=!0){var o=l.value,n=!1;o.hasAttribute("tabindex")&&"-1"===o.getAttribute("tabindex")||(o.setAttribute(r.launchyTabIndex,!0),n=!0),o.hasAttribute("aria-hidden")&&"true"===o.getAttribute("aria-hidden")||(o.setAttribute(r.launchyAriaHidden,!0),n=!0),n&&o.setAttribute(r.launchyFocusable,!0)}}catch(t){e=!0,a=t}finally{try{!t&&i.return&&i.return()}finally{if(e)throw a}}}},{key:"createElements",value:function(t){this.launchControl=document.createElement(o.launchModal),this.launchControl.id=""+d.launchyControl+this.launchyId,this.launchControl.href="#"+d.launchyDialog+this.launchyId,this.launchControl.classList.add(n.modalLaunchLink),this.launchControl.setAttribute("aria-haspopup","dialog"),this.launchControl.textContent=t.text,this.closeControl=document.createElement(o.closeModal),this.closeControl.id=""+d.launchyCloseControl+this.launchyId,this.closeControl.href="#"+d.launchyControl+this.launchyId,this.closeControl.classList.add(n.modalCloseLink),this.closeControl.setAttribute("aria-label",u.modalClose),this.closeControl.innerHTML=u.modalCloseHTML,this.modalWindow=document.createElement(o.modalWindow),this.modalWindow.id=""+d.launchyDialog+this.launchyId,this.modalWindow.classList.add(n.modalWindow),this.modalWindow.setAttribute("tabindex",-1),this.modalWindow.setAttribute("role","dialog"),this.modalWindow.setAttribute("aria-modal",!0),this.hasTitle&&this.modalWindow.setAttribute("aria-labelledby",""+d.modalTitle+this.launchyId),this.modalOverlay=document.createElement(o.modalOverlay),this.modalOverlay.id=""+d.modalOverlay+this.launchyId,this.modalOverlay.classList.add(n.modalOverlay),this.modalOverlay.setAttribute("tabindex",0),this.modalContent=document.createElement(o.modalContent),this.modalContent.classList.add(n.modalContent),this.hasTitle&&(this.modalTitle=document.createElement(o.modalTitle),this.modalTitle.id=""+d.modalTitle+this.launchyId,this.modalTitle.classList.add(n.modalTitle),this.modalTitle.textContent=t.title)}},{key:"insertElements",value:function(t){var e=t.target.querySelectorAll(this.focusable);t.target.parentNode.insertBefore(this.launchControl,t.target),t.target.parentNode.insertBefore(this.modalWindow,t.target),this.modalWindow.appendChild(this.modalContent),this.modalContent.appendChild(this.closeControl),this.hasTitle&&this.modalContent.appendChild(this.modalTitle),this.modalContent.appendChild(t.target);var a=!0,l=!1,i=void 0;try{for(var o,n=Array.from(e)[Symbol.iterator]();!(a=(o=n.next()).done);a=!0){var s=o.value;s.removeAttribute(r.launchyAriaHidden),s.removeAttribute(r.launchyFocusable),s.removeAttribute(r.launchyTabIndex)}}catch(t){l=!0,i=t}finally{try{!a&&n.return&&n.return()}finally{if(l)throw i}}document.body.appendChild(this.modalOverlay)}},{key:"setupEventListeners",value:function(){var t=this.modalContent.querySelectorAll("["+r.launchyCustom.close+"]"),e=this.modalContent.querySelectorAll("["+r.launchyCustom.refocus+"]");this.launchControl.addEventListener("click",this.showModal.bind(this),!1),this.closeControl.addEventListener("click",this.hideModal.bind(this),!1),this.modalOverlay.addEventListener("click",this.hideModal.bind(this),!1),document.addEventListener("focus",this.trapFocus.bind(this),!0),document.addEventListener("keydown",this.checkEsc.bind(this),!1),document.addEventListener("keydown",this.checkShift.bind(this),!1);var a=!0,l=!1,i=void 0;try{for(var o,n=Array.from(t)[Symbol.iterator]();!(a=(o=n.next()).done);a=!0){o.value.addEventListener("click",this.hideModal.bind(this),!1)}}catch(t){l=!0,i=t}finally{try{!a&&n.return&&n.return()}finally{if(l)throw i}}var s=!0,d=!1,u=void 0;try{for(var h,c=Array.from(e)[Symbol.iterator]();!(s=(h=c.next()).done);s=!0){h.value.addEventListener("click",this.hideModalRefocus.bind(this),!1)}}catch(t){d=!0,u=t}finally{try{!s&&c.return&&c.return()}finally{if(d)throw u}}}},{key:"showModal",value:function(t){t.preventDefault(),this.activeElement=document.activeElement,this.modalIsVisible=!0,this.allFocusable=this.modalWindow.querySelectorAll(this.focusable),this.firstFocusable=this.allFocusable[0],this.lastFocusable=this.allFocusable[this.allFocusable.length-1],this.modalWindow.classList.add(n.modalWindowIsVisible),this.modalOverlay.classList.add(n.modalOverlayIsVisible),this.modalWindow.setAttribute("aria-hidden",!1),this.inertElements(!0),this.modalWindow.focus()}},{key:"hideModal",value:function(t){t.preventDefault(),this.modalIsVisible=!1,this.allFocusable=null,this.firstFocusable=null,this.lastFocusable=null,this.modalWindow.classList.remove(n.modalWindowIsVisible),this.modalOverlay.classList.remove(n.modalOverlayIsVisible),this.modalWindow.setAttribute("aria-hidden",!0),this.inertElements(!1),this.activeElement.focus()}},{key:"trapFocus",value:function(t){this.modalIsVisible&&!this.modalWindow.contains(t.target)&&(t.stopPropagation(),this.shiftKeyIsPressed?this.lastFocusable.focus():this.firstFocusable.focus())}},{key:"checkEsc",value:function(t){this.modalIsVisible&&t.keyCode===s.Escape&&this.hideModal(t)}},{key:"checkShift",value:function(t){this.modalIsVisible&&(this.shiftKeyIsPressed=t.shiftKey)}},{key:"hideModalRefocus",value:function(t){var e=t.target.getAttribute(r.launchyCustom.refocus),a=document.querySelector("#"+e);if(null==a)throw Error(u.refocusElemNotFound+": #"+e);this.hideModal(t),a.focus()}},{key:"inertElements",value:function(t){var e=document.querySelectorAll("["+r.launchyFocusable+"]"),a=!0,l=!1,i=void 0;try{for(var o,n=Array.from(e)[Symbol.iterator]();!(a=(o=n.next()).done);a=!0){var s=o.value;t?(s.hasAttribute(r.launchyAriaHidden)&&s.setAttribute("aria-hidden",!0),s.hasAttribute(r.launchyTabIndex)&&s.setAttribute("tabindex",-1)):(s.hasAttribute(r.launchyAriaHidden)&&s.removeAttribute("aria-hidden",!0),s.hasAttribute(r.launchyTabIndex)&&s.removeAttribute("tabindex",-1))}}catch(t){l=!0,i=t}finally{try{!a&&n.return&&n.return()}finally{if(l)throw i}}}}]),t}(),y=function(){var t=document.querySelectorAll(d.launchyElements),e=null,a=null,l=!0,i=!1,o=void 0;try{for(var n,s=Array.from(t)[Symbol.iterator]();!(l=(n=s.next()).done);l=!0){var h=n.value;if(e=h.getAttribute(r.launchyText),a=h.getAttribute(r.launchyTitle),!e)throw Error(u.modalError);if(""===e.trim())throw Error(u.modalErrorEmpty);a||console.warn(u.modalWarning);new c({target:h,text:e,title:a})}}catch(t){i=!0,o=t}finally{try{!l&&s.return&&s.return()}finally{if(i)throw o}}};document.addEventListener("DOMContentLoaded",y,!1),e.Launchy=c},function(t,e){t.exports='a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex="0"], [contenteditable]'}]);